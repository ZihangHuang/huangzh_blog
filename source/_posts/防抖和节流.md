---
title: 防抖和节流
date: 2018-05-26 23:09:05
categories: 技术
tags: [前端]
---

整理了一下防抖和节流

### 防抖

很多时候，多次触发事件后，事件处理函数只执行一次，并且是在触发操作结束时执行，我们在监听滚动条位置，控制是否显示返回顶部按钮时，就可以将防抖函数应用其中。

<!--more-->

```javascript
//定义一个操作函数
function todo(){
    console.log('date:' + new Date())
}

function debounce(callback, time){
    var timer
    return function(){
        clearTimeout(timer);
        timer = setTimeout(function(){
            callback()
        }, time)
    }
}
window.addEventListener('scroll', debounce(todo,50))
```

### 节流

借助 flag 标志和 setTimeout 实现在一定时间内，只执行一次方法，只有上一次函数执行后，过了规定的时间间隔，才能进行下一次的函数调用。

```javascript
function throttle(callback,time){
    var flag = true
    return function(){
        if(!flag){
            return
        }
        flag = false
        setTimeout(function(){
            callback()
            flag = true
        }, time)
    }
}
window.addEventListener('scroll', throttle(todo,2000)) //两秒执行一次
```
