---
title: 拷贝
date: 2018-06-11 20:07:50
categories: 技术
tags: 前端
---

拷贝有两种：浅拷贝和深拷贝。

记录 js 两种拷贝的简单方法。

<!--more-->

### 浅拷贝

```javascript
let obj1 = { a: 0, b: { c: 0 } };
let obj2 = Object.assign({}, obj1);
console.log(JSON.stringify(obj2)); // { a: 0, b: { c: 0}}

obj1.a = 1;
console.log(JSON.stringify(obj1)); // { a: 1, b: { c: 0}}
console.log(JSON.stringify(obj2)); // { a: 0, b: { c: 0}}

obj2.a = 2;
console.log(JSON.stringify(obj1)); // { a: 1, b: { c: 0}}
console.log(JSON.stringify(obj2)); // { a: 2, b: { c: 0}}

obj2.b.c = 3;
console.log(JSON.stringify(obj1)); // { a: 1, b: { c: 3}}
console.log(JSON.stringify(obj2)); // { a: 2, b: { c: 3}}
```

### 深拷贝

```javascript
obj1 = { a: 0, b: { c: 0 } };
let obj3 = JSON.parse(JSON.stringify(obj1));
obj1.a = 4;
obj1.b.c = 4;
console.log(JSON.stringify(obj3)); // { a: 0, b: { c: 0}}


function deepClone(obj) {
    var o;
    if (typeof obj === "object") {
        if (obj === null) {
            o = null;
        } else {
            if (obj instanceof Array) {
                o = [];
                for (var i = 0, len = obj.length; i < len; i++) {
                    o.push(deepClone(obj[i]));
                }
            } else {
                o = {};
                for (var j in obj) {
                    if (obj.hasOwnProperty(j)) o[j] = deepClone(obj[j]);
                }
            }
        }
    } else {
        o = obj;
    }
    return o;
}
```
